<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ============================================
        COMPLETE SEO OPTIMIZATION
    ============================================= -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Primary Meta Tags -->
    <title>ðŸŽ„ Minecraft Christmas Tree Maker - Design & Customize Holiday Trees</title>
    <meta name="title" content="Minecraft Christmas Tree Maker - Design & Customize Holiday Trees">
    <meta name="description" content="Create stunning Minecraft Christmas trees online! Customize height, colors, lights, ornaments, and share your holiday creations. Free Minecraft tree designer tool.">
    <meta name="keywords" content="minecraft christmas tree, minecraft tree maker, minecraft holiday, minecraft generator, minecraft designer, christmas tree minecraft, minecraft decorations, minecraft builder">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tree-maker.minecraftapkks.com/">
    <meta property="og:title" content="Minecraft Christmas Tree Maker - Design & Customize Holiday Trees">
    <meta property="og:description" content="Create stunning Minecraft Christmas trees online! Customize height, colors, lights, ornaments, and share your holiday creations.">
    <meta property="og:image" content="https://minecraftapkks.com/images/minecraft-tree-maker-preview.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Minecraft Christmas Tree Maker Preview">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://tree-maker.minecraftapkks.com/">
    <meta property="twitter:title" content="Minecraft Christmas Tree Maker - Design & Customize Holiday Trees">
    <meta property="twitter:description" content="Create stunning Minecraft Christmas trees online! Customize height, colors, lights, ornaments, and share your holiday creations.">
    <meta property="twitter:image" content="https://minecraftapkks.com/images/minecraft-tree-maker-preview.jpg">
    
    <!-- Structured Data for Rich Results -->
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Minecraft Christmas Tree Maker",
    "url": "https://tree-maker.minecraftapkks.com/",
        "description": "Create and customize Minecraft Christmas trees with this interactive online tool",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "MinecraftAPKKs"
        },
        "screenshot": "https://minecraftapkks.com/images/minecraft-tree-maker-screenshot.jpg",
        "featureList": [
            "Custom tree height and width",
            "Color customization",
            "Christmas lights and ornaments",
            "Animated snow effects",
            "Share and download features"
        ]
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="https://minecraftapkks.com/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://minecraftapkks.com/apple-touch-icon.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://tree-maker.minecraftapkks.com/">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="author" content="MinecraftAPKKs">
    <meta name="copyright" content="MinecraftAPKKs">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="general">
    
    <!-- Mobile Specific -->
    <meta name="theme-color" content="#0b3d0b">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Minecraft Tree Maker">
    
    <!-- External Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Page-Specific CSS -->
    <style>
        /* ============================================
           MAIN STYLES - OPTIMIZED FOR PERFORMANCE
        ============================================= */
        :root {
            --minecraft-green: #00ff00;
            --minecraft-dark-green: #00aa00;
            --minecraft-brown: #8B4513;
            --minecraft-dark: #1a1f2a;
            --minecraft-light: #88ff88;
            --minecraft-gold: #ffd700;
            --minecraft-red: #ff0000;
            --minecraft-blue: #4169e1;
            --minecraft-purple: #9370db;
            
            --primary-bg: #0d1b2a;
            --secondary-bg: #1b263b;
            --accent-color: #2a9d8f;
            --text-primary: #ffffff;
            --text-secondary: #b8c1ec;
            --border-color: #415a77;
            --shadow-color: rgba(0, 0, 0, 0.3);
            
            --border-radius-sm: 8px;
            --border-radius-md: 12px;
            --border-radius-lg: 16px;
            
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --transition-slow: 350ms ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, var(--primary-bg) 0%, #0c1648 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(42, 157, 143, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(233, 196, 106, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(231, 111, 81, 0.03) 0%, transparent 30%);
            pointer-events: none;
            z-index: -1;
        }

        /* Skip to main content for accessibility */
        .skip-to-content {
            position: absolute;
            left: -9999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }
        
        .skip-to-content:focus {
            position: fixed;
            top: 10px;
            left: 10px;
            width: auto;
            height: auto;
            padding: 12px 20px;
            background: var(--accent-color);
            color: #000;
            z-index: 10001;
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            border: 2px solid white;
        }

        /* Enhanced Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            padding: 0 15px;
        }

        /* Enhanced Header */
        .header {
            text-align: center;
            padding: 40px 30px;
            background: linear-gradient(135deg, rgba(11, 61, 11, 0.9) 0%, rgba(26, 0, 26, 0.9) 100%);
            border: 3px solid var(--minecraft-green);
            border-radius: var(--border-radius-lg);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 255, 0, 0.15);
            transition: transform var(--transition-normal);
        }

        .header:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 255, 0, 0.25);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="0" y="0" width="8" height="8" fill="%2300ff00" opacity="0.1"/></svg>'),
                linear-gradient(90deg, transparent 0%, rgba(0, 255, 0, 0.05) 50%, transparent 100%);
            z-index: 0;
            pointer-events: none;
            animation: headerShine 8s infinite linear;
        }

        @keyframes headerShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .header h1 {
            font-size: clamp(2.2rem, 5vw, 3.8rem);
            color: var(--minecraft-green);
            text-shadow: 
                0 0 10px var(--minecraft-green), 
                0 0 20px var(--minecraft-green),
                0 0 30px rgba(0, 255, 0, 0.5);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            line-height: 1.2;
            letter-spacing: 1px;
        }

        .header p {
            font-size: clamp(1.1rem, 2vw, 1.4rem);
            color: var(--minecraft-light);
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0.9;
        }

        .header-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid var(--minecraft-green);
            border-radius: 50px;
            font-size: 0.9rem;
            color: var(--minecraft-light);
            backdrop-filter: blur(10px);
        }

        .minecraft-icon {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin: 0 10px;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        /* Main Content Layout - Enhanced */
        .main-content {
            display: grid;
            grid-template-columns: minmax(300px, 1fr) minmax(400px, 1.5fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 25px;
            }
        }

        /* Enhanced Control Panel */
        .controls {
            background: linear-gradient(145deg, rgba(30, 40, 60, 0.95), rgba(20, 25, 35, 0.95));
            padding: 30px;
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--minecraft-green) transparent;
        }

        .controls::-webkit-scrollbar {
            width: 6px;
        }

        .controls::-webkit-scrollbar-track {
            background: transparent;
        }

        .controls::-webkit-scrollbar-thumb {
            background: var(--minecraft-green);
            border-radius: 3px;
        }

        .tree-preview {
            background: linear-gradient(145deg, rgba(20, 25, 35, 0.95), rgba(10, 15, 25, 0.95));
            padding: 30px;
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Control Group Enhancements */
        .control-group {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .control-group:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .control-group h3 {
            color: var(--minecraft-green);
            margin-bottom: 20px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            padding-left: 15px;
        }

        .control-group h3::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 70%;
            background: var(--minecraft-green);
            border-radius: 2px;
        }

        /* Enhanced Sliders */
        .slider-container {
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-fast);
        }

        .slider-container:hover {
            border-color: var(--minecraft-green);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.1);
        }

        .slider-container label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            color: var(--minecraft-light);
            font-size: 1rem;
            font-weight: 500;
        }

        .slider-value {
            color: var(--minecraft-green);
            font-weight: bold;
            font-size: 1.1rem;
            min-width: 40px;
            text-align: right;
        }

        /* Range Input Styling - Enhanced */
        input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, #333, #555);
            border-radius: 10px;
            outline: none;
            cursor: pointer;
            position: relative;
            transition: all var(--transition-fast);
        }

        input[type="range"]:hover {
            background: linear-gradient(to right, #444, #666);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 26px;
            height: 26px;
            background: var(--minecraft-green);
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid #ffffff;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
            transition: all var(--transition-fast);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(0, 255, 0, 1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 26px;
            height: 26px;
            background: var(--minecraft-green);
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid #ffffff;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
        }

        /* Enhanced Color Pickers */
        .color-pickers {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 15px;
        }

        @media (max-width: 480px) {
            .color-pickers {
                grid-template-columns: 1fr;
            }
        }

        .color-picker {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-fast);
        }

        .color-picker:hover {
            border-color: var(--minecraft-green);
            transform: translateX(5px);
        }

        .color-picker input[type="color"] {
            width: 50px;
            height: 50px;
            border: 3px solid #fff;
            border-radius: 10px;
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .color-picker input[type="color"]:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .color-picker span {
            color: var(--minecraft-light);
            font-size: 1rem;
            font-weight: 500;
            flex-grow: 1;
        }

        /* Enhanced Toggle Switches */
        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 18px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-fast);
        }

        .toggle-switch:hover {
            border-color: var(--minecraft-green);
            background: rgba(0, 255, 0, 0.05);
        }

        .toggle-label {
            color: var(--minecraft-light);
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 65px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 34px;
            border: 2px solid transparent;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        input:checked + .slider {
            background-color: var(--minecraft-green);
            border-color: rgba(255, 255, 255, 0.3);
        }

        input:checked + .slider:before {
            transform: translateX(31px);
            background-color: #ffffff;
        }

        /* Enhanced Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        @media (max-width: 576px) {
            .action-buttons {
                grid-template-columns: 1fr;
            }
        }

        .action-button {
            padding: 18px 25px;
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            min-height: 60px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .action-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .action-button:hover::before {
            left: 100%;
        }

        .action-button:hover,
        .action-button:focus {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            outline: 2px solid rgba(255, 255, 255, 0.5);
        }

        .action-button:active {
            transform: translateY(-2px);
            transition: transform 100ms;
        }

        .action-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .download-btn {
            background: linear-gradient(135deg, var(--minecraft-green), #008800);
            color: white;
        }

        .share-btn {
            background: linear-gradient(135deg, #1da1f2, #0d8ddb);
            color: white;
        }

        .random-btn {
            background: linear-gradient(135deg, #ff9900, #cc6600);
            color: white;
        }

        .undo-btn {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
        }

        .redo-btn {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }

        /* Enhanced Canvas Styling */
        .preview-container {
            width: 100%;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border-radius: var(--border-radius-md);
            padding: 20px;
            border: 3px solid #444;
            box-shadow: 
                inset 0 0 20px rgba(0, 0, 0, 0.5),
                0 10px 30px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            position: relative;
        }

        .preview-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            background: 
                linear-gradient(90deg, transparent 0%, rgba(0, 255, 0, 0.03) 50%, transparent 100%),
                radial-gradient(circle at 50% 50%, transparent 30%, rgba(0, 0, 0, 0.7) 100%);
            border-radius: var(--border-radius-md);
        }

        .tree-canvas {
            width: 100%;
            max-width: 500px;
            height: auto;
            aspect-ratio: 4/5;
            display: block;
            margin: 0 auto;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
            border-radius: 8px;
            background: #1a1a1a;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        /* Enhanced Statistics Display */
        .tree-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 30px;
            width: 100%;
        }

        @media (max-width: 768px) {
            .tree-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .tree-stats {
                grid-template-columns: 1fr;
            }
        }

        .stat {
            text-align: center;
            padding: 25px 15px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(30, 40, 60, 0.4));
            border-radius: var(--border-radius-md);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--minecraft-green), transparent);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .stat:hover::before {
            opacity: 1;
        }

        .stat:hover {
            transform: translateY(-5px);
            border-color: var(--minecraft-green);
            box-shadow: 0 10px 20px rgba(0, 255, 0, 0.1);
        }

        .stat-value {
            font-size: 2.2rem;
            color: var(--minecraft-green);
            font-weight: 800;
            line-height: 1;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        .stat-label {
            font-size: 0.95rem;
            color: var(--minecraft-light);
            opacity: 0.9;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        /* Enhanced Tree Code Display */
        .tree-code-container {
            width: 100%;
            margin-top: 30px;
        }

        .tree-code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .tree-code-header h4 {
            color: var(--minecraft-green);
            font-size: 1.2rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .copy-btn {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid var(--minecraft-green);
            color: var(--minecraft-green);
            padding: 8px 16px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .copy-btn:hover {
            background: var(--minecraft-green);
            color: #000;
        }

        .tree-code {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: var(--border-radius-md);
            font-family: 'Courier New', Consolas, monospace;
            font-size: 0.85rem;
            text-align: left;
            max-height: 250px;
            overflow-y: auto;
            color: var(--minecraft-light);
            border: 1px solid rgba(255, 255, 255, 0.1);
            line-height: 1.5;
        }

        .generated-tree {
            white-space: pre-wrap;
            word-break: break-all;
            user-select: text;
        }

        /* Enhanced Social Sharing */
        .social-share {
            background: linear-gradient(145deg, rgba(30, 40, 60, 0.9), rgba(20, 25, 35, 0.9));
            padding: 40px 30px;
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 40px;
            text-align: center;
        }

        .social-share h3 {
            color: var(--minecraft-green);
            margin-bottom: 25px;
            font-size: 1.8rem;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .share-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .share-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all var(--transition-normal);
            border: 2px solid transparent;
            text-decoration: none;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .share-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .share-icon:hover::after {
            width: 100%;
            height: 100%;
        }

        .share-icon:hover,
        .share-icon:focus {
            transform: scale(1.15) rotate(5deg);
            border-color: white;
            outline: none;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }

        .share-icon.twitter { background: linear-gradient(135deg, #1da1f2, #0a8bd9); }
        .share-icon.facebook { background: linear-gradient(135deg, #1877f2, #0d5cb6); }
        .share-icon.reddit { background: linear-gradient(135deg, #ff4500, #d93a00); }
        .share-icon.whatsapp { background: linear-gradient(135deg, #25d366, #1da851); }
        .share-icon.discord { background: linear-gradient(135deg, #5865f2, #4752c4); }
        .share-icon.pinterest { background: linear-gradient(135deg, #e60023, #b3001b); }

        /* Enhanced Share Link Box */
        .share-link-container {
            position: relative;
            margin-top: 25px;
        }

        .share-link {
            background: rgba(0, 0, 0, 0.5);
            padding: 18px 20px;
            border-radius: var(--border-radius-md);
            word-break: break-all;
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 0.95rem;
            position: relative;
            padding-right: 70px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
            min-height: 60px;
            display: flex;
            align-items: center;
        }

        .share-link:hover {
            background: rgba(0, 255, 0, 0.1);
            border-color: var(--minecraft-green);
            transform: translateY(-3px);
        }

        .share-link::after {
            content: 'ðŸ“‹';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.8;
            font-size: 1.2rem;
            transition: transform var(--transition-fast);
        }

        .share-link:hover::after {
            transform: translateY(-50%) scale(1.2);
        }

        /* Enhanced Loading Overlay */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }

        .loading-content {
            text-align: center;
            max-width: 500px;
            padding: 40px;
            background: rgba(30, 40, 60, 0.9);
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--minecraft-green);
            box-shadow: 0 0 50px rgba(0, 255, 0, 0.3);
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 5px solid #333;
            border-top: 5px solid var(--minecraft-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
            position: relative;
        }

        .loading-spinner::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 5px solid transparent;
            border-top: 5px solid rgba(0, 255, 0, 0.3);
            border-radius: 50%;
            animation: spin 1.5s linear infinite reverse;
        }

        .loading-text {
            color: var(--minecraft-green);
            font-size: 1.4rem;
            font-weight: 600;
            margin-top: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        .loading-subtext {
            color: var(--minecraft-light);
            margin-top: 10px;
            opacity: 0.8;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Enhanced Toast Notifications */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, var(--minecraft-green), #008800);
            color: #000;
            padding: 18px 28px;
            border-radius: var(--border-radius-md);
            font-weight: 600;
            z-index: 1000;
            animation: slideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55), fadeOut 0.4s ease 2.6s forwards;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 255, 0, 0.3);
            border-left: 5px solid #ffffff;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
        }

        .toast i {
            font-size: 1.3rem;
        }

        @keyframes slideIn {
            from { 
                transform: translateX(100%) translateY(20px); 
                opacity: 0; 
            }
            to { 
                transform: translateX(0) translateY(0); 
                opacity: 1; 
            }
        }

        @keyframes fadeOut {
            to { 
                opacity: 0; 
                transform: translateY(20px);
            }
        }

        /* Enhanced Snowflake Animation */
        .snowflake {
            position: fixed;
            color: #ffffff;
            font-size: 24px;
            animation: fall linear infinite;
            pointer-events: none;
            user-select: none;
            z-index: 9999;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        @keyframes fall {
            0% { 
                transform: translateY(-100px) rotate(0deg) scale(0.5); 
                opacity: 0; 
            }
            10% { 
                opacity: 1; 
                transform: scale(1);
            }
            90% { 
                opacity: 1; 
            }
            100% { 
                transform: translateY(100vh) rotate(720deg) scale(0.5); 
                opacity: 0; 
            }
        }

        /* Enhanced SEO Content Section */
        .seo-content {
            margin-top: 50px;
            padding: 40px;
            background: linear-gradient(145deg, rgba(30, 40, 60, 0.9), rgba(20, 25, 35, 0.9));
            border-radius: var(--border-radius-lg);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .seo-content h2 {
            color: var(--minecraft-green);
            margin-bottom: 25px;
            font-size: 2.2rem;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .seo-content h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--minecraft-green), transparent);
        }

        .seo-content h3 {
            color: var(--minecraft-light);
            margin: 35px 0 20px 0;
            font-size: 1.5rem;
            position: relative;
            padding-left: 15px;
        }

        .seo-content h3::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
            color: var(--minecraft-green);
        }

        .seo-content p {
            margin-bottom: 20px;
            line-height: 1.8;
            color: #d1d9ff;
            font-size: 1.1rem;
        }

        .seo-content ul, .seo-content ol {
            margin-left: 25px;
            margin-bottom: 25px;
        }

        .seo-content li {
            margin-bottom: 12px;
            color: #d1d9ff;
            line-height: 1.7;
            position: relative;
            padding-left: 10px;
        }

        .seo-content li::before {
            content: 'â€¢';
            color: var(--minecraft-green);
            font-weight: bold;
            position: absolute;
            left: -15px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-item {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.3), rgba(30, 40, 60, 0.3));
            padding: 25px;
            border-radius: var(--border-radius-md);
            border-left: 5px solid var(--minecraft-green);
            transition: all var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .feature-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(transparent, rgba(0, 255, 0, 0.05), transparent);
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .feature-item:hover::before {
            opacity: 1;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 255, 0, 0.1);
        }

        .feature-item h4 {
            color: var(--minecraft-green);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Enhanced FAQ Section */
        .faq-section {
            margin-top: 40px;
        }

        .faq-item {
            margin-bottom: 20px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.3), rgba(30, 40, 60, 0.3));
            border-radius: var(--border-radius-md);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-fast);
        }

        .faq-item:hover {
            border-color: var(--minecraft-green);
            box-shadow: 0 5px 20px rgba(0, 255, 0, 0.1);
        }

        .faq-question {
            padding: 22px;
            background: rgba(30, 40, 60, 0.5);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--minecraft-light);
            font-weight: 600;
            font-size: 1.1rem;
            transition: all var(--transition-fast);
        }

        .faq-question:hover {
            background: rgba(30, 40, 60, 0.7);
        }

        .faq-question i {
            transition: transform var(--transition-fast);
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        .faq-answer {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            color: #cccccc;
            line-height: 1.7;
            transition: all var(--transition-normal);
        }

        .faq-item.active .faq-answer {
            padding: 22px;
            max-height: 500px;
        }

        /* Responsive Design - Enhanced */
        @media (max-width: 1200px) {
            .container {
                padding: 0 10px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .header {
                padding: 30px 20px;
                margin-bottom: 30px;
            }
            
            .controls,
            .tree-preview,
            .social-share,
            .seo-content {
                padding: 25px 20px;
            }
            
            .action-button {
                padding: 16px 20px;
                font-size: 1rem;
            }
            
            .tree-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .share-icons {
                gap: 15px;
            }
            
            .share-icon {
                width: 55px;
                height: 55px;
                font-size: 1.6rem;
            }
        }

        @media (max-width: 576px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .minecraft-icon {
                margin: 0 5px;
            }
            
            .tree-stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .stat {
                padding: 20px 15px;
            }
            
            .stat-value {
                font-size: 1.8rem;
            }
            
            .color-pickers {
                grid-template-columns: 1fr;
            }
            
            .share-icons {
                gap: 12px;
            }
            
            .share-icon {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }
            
            .seo-content {
                padding: 25px 20px;
            }
            
            .seo-content h2 {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .header-badges {
                flex-direction: column;
                align-items: center;
            }
            
            .badge {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
            
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .tree-canvas {
                max-width: 100%;
            }
        }

        /* Print Styles */
        @media print {
            .social-share,
            .action-buttons,
            .share-link,
            .header-badges,
            .controls {
                display: none !important;
            }
            
            .tree-canvas {
                border: 2px solid #000;
                max-width: 100% !important;
                page-break-inside: avoid;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .container {
                max-width: 100% !important;
                padding: 0 !important;
            }
            
            .seo-content {
                break-inside: avoid;
            }
        }

        /* Focus styles for accessibility */
        :focus-visible {
            outline: 3px solid var(--minecraft-green);
            outline-offset: 3px;
            border-radius: 4px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--minecraft-green), var(--minecraft-dark-green));
            border-radius: 5px;
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #00ff00, #00cc00);
        }

        /* Utility Classes */
        .visually-hidden {
            position: absolute !important;
            width: 1px !important;
            height: 1px !important;
            padding: 0 !important;
            margin: -1px !important;
            overflow: hidden !important;
            clip: rect(0, 0, 0, 0) !important;
            white-space: nowrap !important;
            border: 0 !important;
        }

        /* Particle Background */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: var(--minecraft-green);
            border-radius: 50%;
            opacity: 0.1;
            animation: floatParticle 20s infinite linear;
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(0) translateX(0);
            }
            100% {
                transform: translateY(-100vh) translateX(100px);
            }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--minecraft-dark);
            color: #fff;
            text-align: center;
            border-radius: var(--border-radius-sm);
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity var(--transition-fast);
            border: 1px solid var(--minecraft-green);
            font-size: 0.9rem;
            pointer-events: none;
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--minecraft-green) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Preset Selector */
        .preset-selector {
            margin-top: 20px;
        }

        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .preset-btn {
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-sm);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 0.9rem;
        }

        .preset-btn:hover {
            background: rgba(0, 255, 0, 0.1);
            border-color: var(--minecraft-green);
            color: var(--minecraft-green);
            transform: translateY(-2px);
        }

        .preset-btn.active {
            background: var(--minecraft-green);
            color: #000;
            font-weight: 600;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--minecraft-green), #00cc00);
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Notification Counter */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--minecraft-red);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 20px;
            text-align: center;
            font-weight: bold;
            border: 2px solid var(--secondary-bg);
        }

        /* Dark Mode Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .theme-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--minecraft-green);
            color: var(--minecraft-green);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all var(--transition-fast);
            backdrop-filter: blur(10px);
        }

        .theme-btn:hover {
            transform: rotate(30deg) scale(1.1);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
    </style>
</head>
<body>
    <!-- Skip to Content Link for Accessibility -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Loading Overlay -->
    <div class="loading" id="loading" role="status" aria-live="polite">
        <div class="loading-content">
            <div class="loading-spinner" aria-hidden="true"></div>
            <div class="loading-text">Generating Your Minecraft Tree...</div>
            <div class="loading-subtext">Please wait while we create your masterpiece</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
    </div>

    <!-- Particles Background -->
    <div class="particles" id="particles"></div>

    <!-- Theme Toggle -->
    <div class="theme-toggle">
        <button class="theme-btn" id="themeToggle" aria-label="Toggle theme">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <div class="container">
        <!-- Main Header -->
        <header class="header" role="banner">
            <h1><span class="minecraft-icon">ðŸŽ„</span> MINECRAFT CHRISTMAS TREE MAKER <span class="minecraft-icon">â›ï¸</span></h1>
            <p>Design â€¢ Customize â€¢ Share Your Holiday Creation - Free Minecraft Tree Designer Tool</p>
            
            <div class="header-badges">
                <div class="badge">
                    <i class="fas fa-bolt"></i>
                    <span>No Download Required</span>
                </div>
                <div class="badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>100% Free & Safe</span>
                </div>
                <div class="badge">
                    <i class="fas fa-mobile-alt"></i>
                    <span>Mobile Friendly</span>
                </div>
            </div>
        </header>

        <main id="main-content" role="main">
            <div class="main-content">
                <!-- Controls Panel -->
                <section class="controls" aria-labelledby="controls-heading">
                    <h2 id="controls-heading" class="visually-hidden">Tree Customization Controls</h2>
                    
                    <!-- History Controls -->
                    <div class="control-group">
                        <h3><i class="fas fa-history"></i> History</h3>
                        <div class="action-buttons" style="margin-top: 0;">
                            <button class="action-button undo-btn" onclick="undo()" aria-label="Undo last change" id="undoBtn" disabled>
                                <i class="fas fa-undo"></i> Undo
                            </button>
                            <button class="action-button redo-btn" onclick="redo()" aria-label="Redo last change" id="redoBtn" disabled>
                                <i class="fas fa-redo"></i> Redo
                            </button>
                        </div>
                    </div>

                    <!-- Preset Selector -->
                    <div class="control-group preset-selector">
                        <h3><i class="fas fa-star"></i> Quick Presets</h3>
                        <div class="preset-buttons">
                            <button class="preset-btn" onclick="loadPreset('classic')" data-preset="classic">Classic Tree</button>
                            <button class="preset-btn" onclick="loadPreset('snowy')" data-preset="snowy">Snowy Tree</button>
                            <button class="preset-btn" onclick="loadPreset('rainbow')" data-preset="rainbow">Rainbow Tree</button>
                            <button class="preset-btn" onclick="loadPreset('golden')" data-preset="golden">Golden Tree</button>
                            <button class="preset-btn" onclick="loadPreset('mini')" data-preset="mini">Mini Tree</button>
                        </div>
                    </div>

                    <!-- Tree Size & Style -->
                    <div class="control-group">
                        <h3><i class="fas fa-tree"></i> Tree Size & Style</h3>
                        <div class="slider-container">
                            <label for="treeHeight">
                                <span>Tree Height</span>
                                <span class="slider-value" id="heightValue">7</span>
                            </label>
                            <input type="range" id="treeHeight" min="5" max="20" value="7" step="1" 
                                   aria-label="Adjust tree height from 5 to 20 blocks">
                        </div>
                        <div class="slider-container">
                            <label for="treeWidth">
                                <span>Tree Width</span>
                                <span class="slider-value" id="widthValue">5</span>
                            </label>
                            <input type="range" id="treeWidth" min="3" max="12" value="5" step="1"
                                   aria-label="Adjust tree width from 3 to 12 blocks">
                        </div>
                        <div class="toggle-switch">
                            <label class="toggle-label" for="snowToggle">
                                <i class="fas fa-snowflake"></i>
                                <span>Snow on Tree</span>
                            </label>
                            <label class="switch">
                                <input type="checkbox" id="snowToggle" checked aria-label="Toggle snow on tree">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-switch">
                            <label class="toggle-label" for="lightsToggle">
                                <i class="fas fa-lightbulb"></i>
                                <span>Christmas Lights</span>
                            </label>
                            <label class="switch">
                                <input type="checkbox" id="lightsToggle" checked aria-label="Toggle Christmas lights">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Tree Colors -->
                    <div class="control-group">
                        <h3><i class="fas fa-palette"></i> Tree Colors</h3>
                        <div class="color-pickers">
                            <div class="color-picker">
                                <input type="color" id="treeColor" value="#00aa00" aria-label="Choose tree leaves color">
                                <span>Leaves</span>
                            </div>
                            <div class="color-picker">
                                <input type="color" id="trunkColor" value="#8B4513" aria-label="Choose trunk color">
                                <span>Trunk</span>
                            </div>
                            <div class="color-picker">
                                <input type="color" id="ornamentColor" value="#ff0000" aria-label="Choose ornament color">
                                <span>Ornaments</span>
                            </div>
                            <div class="color-picker">
                                <input type="color" id="starColor" value="#ffff00" aria-label="Choose star color">
                                <span>Star</span>
                            </div>
                        </div>
                    </div>

                    <!-- Special Effects -->
                    <div class="control-group">
                        <h3><i class="fas fa-magic"></i> Special Effects</h3>
                        <div class="toggle-switch">
                            <label class="toggle-label" for="animatedSnow">
                                <i class="fas fa-wind"></i>
                                <span>Animated Snow</span>
                            </label>
                            <label class="switch">
                                <input type="checkbox" id="animatedSnow" checked aria-label="Toggle animated snow effect">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-switch">
                            <label class="toggle-label" for="glowEffect">
                                <i class="fas fa-fire"></i>
                                <span>Glowing Effect</span>
                            </label>
                            <label class="switch">
                                <input type="checkbox" id="glowEffect" checked aria-label="Toggle glowing effect">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-switch">
                            <label class="toggle-label" for="giftsToggle">
                                <i class="fas fa-gift"></i>
                                <span>Random Gifts</span>
                            </label>
                            <label class="switch">
                                <input type="checkbox" id="giftsToggle" checked aria-label="Toggle random gifts">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-switch">
                            <label class="toggle-label" for="sparkleEffect">
                                <i class="fas fa-sparkles"></i>
                                <span>Sparkle Effect</span>
                            </label>
                            <label class="switch">
                                <input type="checkbox" id="sparkleEffect" aria-label="Toggle sparkle effect">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="action-button download-btn" onclick="downloadTree()" aria-label="Download tree as PNG image">
                            <i class="fas fa-download"></i>
                            <span>Download PNG</span>
                        </button>
                        <button class="action-button share-btn" onclick="shareTree()" aria-label="Share your tree design">
                            <i class="fas fa-share-alt"></i>
                            <span>Share Tree</span>
                        </button>
                        <button class="action-button random-btn" onclick="generateRandomTree()" aria-label="Generate random tree design">
                            <i class="fas fa-random"></i>
                            <span>Random Tree</span>
                        </button>
                    </div>
                </section>

                <!-- Tree Preview Panel -->
                <section class="tree-preview" aria-labelledby="preview-heading">
                    <h2 id="preview-heading" style="color: var(--minecraft-green); margin-bottom: 25px; font-size: 1.8rem;">
                        <i class="fas fa-eye"></i> Your Minecraft Christmas Tree
                    </h2>
                    
                    <div class="preview-container">
                        <canvas id="treeCanvas" class="tree-canvas" width="500" height="625" 
                                aria-label="Preview of your Minecraft Christmas tree" role="img">
                            Your browser does not support the canvas element. Please update your browser to view the tree preview.
                        </canvas>
                    </div>
                    
                    <div class="tree-stats" aria-label="Tree statistics">
                        <div class="stat">
                            <div class="stat-value" id="blockCount">0</div>
                            <div class="stat-label">Blocks Used</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="ornamentCount">0</div>
                            <div class="stat-label">Ornaments</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="lightCount">0</div>
                            <div class="stat-label">Lights</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="giftCount">0</div>
                            <div class="stat-label">Gifts</div>
                        </div>
                    </div>

                    <div class="tree-code-container">
                        <div class="tree-code-header">
                            <h4><i class="fas fa-code"></i> Minecraft Tree Code:</h4>
                            <button class="copy-btn" onclick="copyTreeCode()" aria-label="Copy tree code">
                                <i class="fas fa-copy"></i>
                                <span>Copy Code</span>
                            </button>
                        </div>
                        <div class="tree-code" aria-label="Tree code for sharing">
                            <div class="generated-tree" id="treeCode" role="textbox" aria-readonly="true"></div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Social Sharing Section -->
            <section class="social-share" aria-labelledby="share-heading">
                <h2 id="share-heading"><i class="fas fa-share-square"></i> Share Your Creation</h2>
                <p style="color: var(--text-secondary); margin-bottom: 25px; font-size: 1.1rem;">
                    Share your unique Minecraft Christmas tree with friends and the community!
                </p>
                
                <div class="share-icons">
                    <a href="#" class="share-icon twitter" onclick="shareOnTwitter(); return false;" aria-label="Share on Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="share-icon facebook" onclick="shareOnFacebook(); return false;" aria-label="Share on Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="share-icon reddit" onclick="shareOnReddit(); return false;" aria-label="Share on Reddit">
                        <i class="fab fa-reddit-alien"></i>
                    </a>
                    <a href="#" class="share-icon whatsapp" onclick="shareOnWhatsApp(); return false;" aria-label="Share on WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="#" class="share-icon discord" onclick="shareOnDiscord(); return false;" aria-label="Share on Discord">
                        <i class="fab fa-discord"></i>
                    </a>
                    <a href="#" class="share-icon pinterest" onclick="shareOnPinterest(); return false;" aria-label="Share on Pinterest">
                        <i class="fab fa-pinterest-p"></i>
                    </a>
                </div>
                
                <div class="share-link-container">
                    <div class="share-link" onclick="copyShareLink()" role="button" tabindex="0" 
                         title="Click to copy share link" aria-label="Share link - click to copy">
                        <span id="shareLink">Generating share link...</span>
                    </div>
                </div>
            </section>

            <!-- SEO Content Section -->
            <section class="seo-content" aria-labelledby="seo-heading">
                <h2 id="seo-heading">Create Amazing Minecraft Christmas Trees Online</h2>
                
                <p>Welcome to the ultimate <strong>Minecraft Christmas Tree Maker</strong> - the free online tool that lets you design and customize beautiful holiday trees for your Minecraft world. Whether you're preparing for Christmas in your Minecraft server or just want to create festive decorations, our tree maker has everything you need.</p>
                
                <div class="feature-grid">
                    <div class="feature-item">
                        <h4><i class="fas fa-palette"></i> Full Customization</h4>
                        <p>Adjust tree size, colors, ornaments, and special effects to create your perfect Christmas tree with pixel-perfect precision.</p>
                    </div>
                    <div class="feature-item">
                        <h4><i class="fas fa-download"></i> Easy Export</h4>
                        <p>Export your creations as high-quality PNG images to share with friends or use as building references in your Minecraft world.</p>
                    </div>
                    <div class="feature-item">
                        <h4><i class="fas fa-share-alt"></i> Instant Sharing</h4>
                        <p>Generate shareable links and post your trees directly to social media platforms with one click.</p>
                    </div>
                    <div class="feature-item">
                        <h4><i class="fas fa-gamepad"></i> Minecraft Authentic</h4>
                        <p>Designed with authentic Minecraft aesthetics, block-style graphics, and realistic lighting effects.</p>
                    </div>
                </div>

                <h3>How to Use the Minecraft Christmas Tree Maker</h3>
                <ol>
                    <li><strong>Adjust Size</strong>: Use the intuitive sliders to set your tree's height and width</li>
                    <li><strong>Choose Colors</strong>: Pick custom colors for leaves, trunk, ornaments, and star using the color pickers</li>
                    <li><strong>Toggle Effects</strong>: Enable snow, lights, glowing effects, sparkles, and gifts with toggle switches</li>
                    <li><strong>Real-time Preview</strong>: Watch your tree update instantly as you make changes</li>
                    <li><strong>Export & Share</strong>: Download your creation or share it with the Minecraft community worldwide</li>
                </ol>

                <h3>Perfect for Minecraft Builders</h3>
                <p>This tool is ideal for Minecraft players who want to:</p>
                <ul>
                    <li>Plan Christmas decorations before building in-game</li>
                    <li>Share holiday build ideas with friends and servers</li>
                    <li>Create unique Christmas cards with Minecraft themes</li>
                    <li>Generate inspiration for holiday-themed Minecraft projects</li>
                    <li>Teach younger players about design and creativity</li>
                    <li>Create custom decorations for Minecraft servers</li>
                </ul>

                <div class="faq-section">
                    <h3>Frequently Asked Questions</h3>
                    
                    <div class="faq-item" id="faq1">
                        <div class="faq-question" onclick="toggleFAQ('faq1')">
                            <span>Is this Minecraft Christmas Tree Maker free?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Yes! Our Minecraft Christmas Tree Maker is completely free to use. No registration, no downloads, no payments required. You can create, customize, and share as many trees as you want without any limitations.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" id="faq2">
                        <div class="faq-question" onclick="toggleFAQ('faq2')">
                            <span>Can I use the trees in my actual Minecraft game?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>While this tool creates visual representations, you can use the generated designs as references to build the trees in your Minecraft world. The tree code section provides all the specifications you need to recreate your design block-by-block in any Minecraft version.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" id="faq3">
                        <div class="faq-question" onclick="toggleFAQ('faq3')">
                            <span>How do I save my tree designs?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>You can save your trees in three ways: 1) Bookmark the share link for each design, 2) Download the PNG image to your device, or 3) Copy the tree code and save it in a text file. We also support browser localStorage for temporary saves.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item" id="faq4">
                        <div class="faq-question" onclick="toggleFAQ('faq4')">
                            <span>Will this work on mobile devices?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Absolutely! Our Minecraft Tree Maker is fully responsive and works perfectly on smartphones, tablets, and desktop computers. All features are available on mobile devices with touch-optimized controls.</p>
                        </div>
                    </div>
                </div>

                <h3>Tips for Best Results</h3>
                <ul>
                    <li>Use contrasting colors for ornaments to make them stand out against the tree</li>
                    <li>Enable the glowing effect for a magical nighttime look with ambient lighting</li>
                    <li>Try the random tree generator for unexpected and creative design ideas</li>
                    <li>Save your favorite designs by bookmarking the share links or downloading PNGs</li>
                    <li>Combine multiple trees of different sizes for a forest effect in your Minecraft world</li>
                    <li>Experiment with different color combinations for unique holiday themes</li>
                    <li>Use the undo/redo feature to experiment without fear of losing your design</li>
                </ul>

                <p style="padding: 20px; background: rgba(0, 255, 0, 0.1); border-left: 4px solid var(--minecraft-green); border-radius: var(--border-radius-sm); margin-top: 30px;">
                    <strong>Note:</strong> This tool is not affiliated with or endorsed by Mojang/Microsoft. Minecraft is a trademark of Mojang AB. All creations are for personal, non-commercial use.
                </p>
            </section>
        </main>

        <!-- Footer -->
        <footer style="margin-top: 50px; padding: 30px; text-align: center; color: var(--text-secondary); border-top: 1px solid rgba(255, 255, 255, 0.1);">
            <p>Â© 2024 Minecraft Christmas Tree Maker. All rights reserved.</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                Made with <i class="fas fa-heart" style="color: #ff0000;"></i> for the Minecraft community
            </p>
        </footer>
    </div>

    <!-- JavaScript Files -->
    <script>
        // ============================================
        // MAIN APPLICATION
        // ============================================
        class MinecraftTreeMaker {
            constructor() {
                this.config = {
                    SITE_DOMAIN: 'minecraftapkks.com',
                    PAGE_TITLE: 'Minecraft Christmas Tree Maker',
                    MAX_HISTORY: 20,
                    CANVAS_WIDTH: 500,
                    CANVAS_HEIGHT: 625,
                    BLOCK_SIZE: 16
                };

                this.treeSettings = {
                    height: 7,
                    width: 5,
                    treeColor: '#00aa00',
                    trunkColor: '#8B4513',
                    ornamentColor: '#ff0000',
                    starColor: '#ffff00',
                    snow: true,
                    lights: true,
                    animatedSnow: true,
                    glow: true,
                    gifts: true,
                    sparkle: false
                };

                this.stats = {
                    blocks: 0,
                    ornaments: 0,
                    lights: 0,
                    gifts: 0
                };

                this.history = [];
                this.historyIndex = -1;
                this.canvas = null;
                this.ctx = null;
                this.isGenerating = false;
                this.currentPreset = 'classic';
                this.particles = [];
                this.sparkles = [];

                this.presets = {
                    classic: { height: 7, width: 5, treeColor: '#00aa00', trunkColor: '#8B4513', ornamentColor: '#ff0000', starColor: '#ffff00', snow: true, lights: true, animatedSnow: true, glow: true, gifts: true, sparkle: false },
                    snowy: { height: 9, width: 6, treeColor: '#00cc00', trunkColor: '#8B4513', ornamentColor: '#ff6666', starColor: '#ffff99', snow: true, lights: true, animatedSnow: true, glow: false, gifts: true, sparkle: true },
                    rainbow: { height: 8, width: 5, treeColor: '#00aa00', trunkColor: '#8B4513', ornamentColor: '#ff00ff', starColor: '#00ffff', snow: false, lights: true, animatedSnow: false, glow: true, gifts: false, sparkle: true },
                    golden: { height: 10, width: 7, treeColor: '#ffd700', trunkColor: '#8B4513', ornamentColor: '#ffffff', starColor: '#ffffff', snow: true, lights: true, animatedSnow: true, glow: true, gifts: true, sparkle: true },
                    mini: { height: 5, width: 3, treeColor: '#00ff00', trunkColor: '#8B4513', ornamentColor: '#ff0000', starColor: '#ffff00', snow: false, lights: true, animatedSnow: false, glow: false, gifts: false, sparkle: false }
                };

                this.init();
            }

            init() {
                this.setupCanvas();
                this.setupEventListeners();
                this.setupParticles();
                this.loadFromStorage();
                this.addToHistory();
                this.generateTree();
                this.setupThemeToggle();
                this.setupPresetButtons();
            }

            setupCanvas() {
                this.canvas = document.getElementById('treeCanvas');
                this.ctx = this.canvas.getContext('2d');
                
                // Handle high DPI displays
                const dpr = window.devicePixelRatio || 1;
                this.canvas.width = this.config.CANVAS_WIDTH * dpr;
                this.canvas.height = this.config.CANVAS_HEIGHT * dpr;
                this.ctx.scale(dpr, dpr);
                this.canvas.style.width = `${this.config.CANVAS_WIDTH}px`;
                this.canvas.style.height = `${this.config.CANVAS_HEIGHT}px`;
            }

            setupEventListeners() {
                // Sliders
                ['treeHeight', 'treeWidth'].forEach(id => {
                    const el = document.getElementById(id);
                    const valueEl = document.getElementById(id.replace('tree', '').toLowerCase() + 'Value');
                    
                    el.addEventListener('input', (e) => {
                        const value = parseInt(e.target.value);
                        valueEl.textContent = value;
                        this.treeSettings[id.replace('tree', '').toLowerCase()] = value;
                        this.addToHistory();
                        this.generateTree();
                    });
                });

                // Color pickers
                ['treeColor', 'trunkColor', 'ornamentColor', 'starColor'].forEach(id => {
                    document.getElementById(id).addEventListener('input', (e) => {
                        this.treeSettings[id] = e.target.value;
                        this.addToHistory();
                        this.generateTree();
                    });
                });

                // Toggle switches
                ['snowToggle', 'lightsToggle', 'animatedSnow', 'glowEffect', 'giftsToggle', 'sparkleEffect'].forEach(id => {
                    document.getElementById(id).addEventListener('change', (e) => {
                        const settingName = id.replace('Toggle', '').replace('Effect', '').toLowerCase();
                        this.treeSettings[settingName] = e.target.checked;
                        
                        if (id === 'animatedSnow' || id === 'sparkleEffect') {
                            this.updateEffects();
                        }
                        
                        this.addToHistory();
                        this.generateTree();
                    });
                });

                // Window resize
                window.addEventListener('resize', this.debounce(() => {
                    this.generateTree();
                }, 250));

                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key) {
                            case 's': e.preventDefault(); this.downloadTree(); break;
                            case 'z': e.preventDefault(); this.undo(); break;
                            case 'y': e.preventDefault(); this.redo(); break;
                            case 'r': e.preventDefault(); this.generateRandomTree(); break;
                        }
                    }
                });

                // Copy buttons
                document.querySelector('.share-link').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        this.copyShareLink();
                    }
                });
            }

            setupParticles() {
                const particlesContainer = document.getElementById('particles');
                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.width = `${Math.random() * 4 + 1}px`;
                    particle.style.height = particle.style.width;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    particle.style.animationDelay = `${Math.random() * 20}s`;
                    particle.style.opacity = Math.random() * 0.1 + 0.05;
                    particlesContainer.appendChild(particle);
                    this.particles.push(particle);
                }
            }

            setupThemeToggle() {
                const themeBtn = document.getElementById('themeToggle');
                themeBtn.addEventListener('click', () => {
                    document.body.classList.toggle('light-theme');
                    const icon = themeBtn.querySelector('i');
                    if (document.body.classList.contains('light-theme')) {
                        icon.className = 'fas fa-sun';
                        themeBtn.setAttribute('aria-label', 'Switch to dark theme');
                    } else {
                        icon.className = 'fas fa-moon';
                        themeBtn.setAttribute('aria-label', 'Switch to light theme');
                    }
                });
            }

            setupPresetButtons() {
                const buttons = document.querySelectorAll('.preset-btn');
                buttons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        buttons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    });
                });
            }

            // ============================================
            // TREE GENERATION
            // ============================================
            async generateTree() {
                if (this.isGenerating) return;
                this.isGenerating = true;

                this.showLoading(true);
                
                try {
                    await this.renderTree();
                    this.updateStatsDisplay();
                    this.generateTreeCode();
                    this.updateShareLink();
                    this.updatePageTitle();
                    this.saveToStorage();
                } catch (error) {
                    console.error('Error generating tree:', error);
                    this.showToast('âŒ Error generating tree. Please try again.', 'error');
                } finally {
                    setTimeout(() => {
                        this.showLoading(false);
                        this.isGenerating = false;
                    }, 300);
                }
            }

            async renderTree() {
                return new Promise(resolve => {
                    requestAnimationFrame(() => {
                        this.clearCanvas();
                        this.drawBackground();
                        this.drawTree();
                        this.drawTrunk();
                        
                        if (this.treeSettings.lights) {
                            this.drawOrnaments();
                        }
                        
                        this.drawStar();
                        
                        if (this.treeSettings.snow) {
                            this.drawSnow();
                        }
                        
                        if (this.treeSettings.gifts) {
                            this.drawGifts();
                        }
                        
                        if (this.treeSettings.sparkle) {
                            this.drawSparkles();
                        }
                        
                        resolve();
                    });
                });
            }

            clearCanvas() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.stats = { blocks: 0, ornaments: 0, lights: 0, gifts: 0 };
            }

            drawBackground() {
                // Sky gradient
                const gradient = this.ctx.createLinearGradient(0, 0, 0, this.config.CANVAS_HEIGHT);
                gradient.addColorStop(0, '#0a1f3a');
                gradient.addColorStop(1, '#1a2f4a');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.config.CANVAS_WIDTH, this.config.CANVAS_HEIGHT);
                
                // Stars
                this.ctx.fillStyle = '#ffffff';
                for (let i = 0; i < 80; i++) {
                    const x = Math.random() * this.config.CANVAS_WIDTH;
                    const y = Math.random() * this.config.CANVAS_HEIGHT * 0.6;
                    const size = Math.random() * 3;
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, size, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Twinkling effect
                    if (Math.random() > 0.7) {
                        this.ctx.globalAlpha = 0.5 + Math.random() * 0.5;
                        this.ctx.beginPath();
                        this.ctx.arc(x, y, size * 1.5, 0, Math.PI * 2);
                        this.ctx.fill();
                        this.ctx.globalAlpha = 1;
                    }
                }
            }

            drawTree() {
                const blockSize = this.config.BLOCK_SIZE;
                const centerX = this.config.CANVAS_WIDTH / 2;
                const baseY = this.config.CANVAS_HEIGHT - 150;
                
                for (let layer = 0; layer < this.treeSettings.height; layer++) {
                    const layerWidth = this.treeSettings.width - Math.floor(layer / 2);
                    if (layerWidth <= 0) continue;
                    
                    const y = baseY - (layer * blockSize * 1.5);
                    
                    for (let i = 0; i < layerWidth; i++) {
                        const x = centerX - ((layerWidth / 2) * blockSize) + (i * blockSize);
                        this.drawBlock(x, y, blockSize, this.treeSettings.treeColor);
                        this.stats.blocks++;
                    }
                }
            }

            drawBlock(x, y, size, color) {
                // Main block
                this.ctx.fillStyle = color;
                this.ctx.fillRect(x, y, size, size);
                
                // 3D effect - dark edges
                this.ctx.fillStyle = this.darkenColor(color, 30);
                this.ctx.fillRect(x, y, 3, size);
                this.ctx.fillRect(x, y, size, 3);
                
                // 3D effect - light edges
                this.ctx.fillStyle = this.lightenColor(color, 30);
                this.ctx.fillRect(x + size - 3, y, 3, size);
                this.ctx.fillRect(x, y + size - 3, size, 3);
                
                // Border
                this.ctx.strokeStyle = '#000000';
                this.ctx.lineWidth = 1;
                this.ctx.strokeRect(x, y, size, size);
                
                // Texture dots
                if (Math.random() > 0.7) {
                    this.ctx.fillStyle = this.darkenColor(color, 15);
                    this.ctx.beginPath();
                    this.ctx.arc(x + size/2, y + size/2, 1, 0, Math.PI * 2);
                    this.ctx.fill();
                }
            }

            drawTrunk() {
                const blockSize = this.config.BLOCK_SIZE;
                const centerX = this.config.CANVAS_WIDTH / 2;
                const baseY = this.config.CANVAS_HEIGHT - 150;
                
                for (let i = 0; i < 4; i++) {
                    const x = centerX - (blockSize / 2);
                    const y = baseY + (i * blockSize * 1.5);
                    this.drawBlock(x, y, blockSize, this.treeSettings.trunkColor);
                    this.stats.blocks++;
                }
            }

            drawOrnaments() {
                const blockSize = this.config.BLOCK_SIZE;
                const centerX = this.config.CANVAS_WIDTH / 2;
                const baseY = this.config.CANVAS_HEIGHT - 150;
                const totalOrnaments = Math.floor(this.treeSettings.height * 1.5);
                
                for (let i = 0; i < totalOrnaments; i++) {
                    const layer = Math.floor(Math.random() * this.treeSettings.height);
                    const layerWidth = this.treeSettings.width - Math.floor(layer / 2);
                    if (layerWidth <= 0) continue;
                    
                    const blockIndex = Math.floor(Math.random() * layerWidth);
                    const y = baseY - (layer * blockSize * 1.5);
                    const x = centerX - ((layerWidth / 2) * blockSize) + (blockIndex * blockSize);
                    
                    // Ornament
                    this.ctx.fillStyle = this.treeSettings.ornamentColor;
                    this.ctx.beginPath();
                    this.ctx.arc(x + blockSize/2, y + blockSize/2, blockSize/3, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Shine
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.beginPath();
                    this.ctx.arc(x + blockSize/2 - 3, y + blockSize/2 - 3, 2, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Glow effect
                    if (this.treeSettings.glow) {
                        this.ctx.shadowColor = this.treeSettings.ornamentColor;
                        this.ctx.shadowBlur = 10;
                        setTimeout(() => this.ctx.shadowBlur = 0, 50);
                    }
                    
                    this.stats.ornaments++;
                    this.stats.lights++;
                }
            }

            drawStar() {
                const blockSize = this.config.BLOCK_SIZE;
                const centerX = this.config.CANVAS_WIDTH / 2;
                const baseY = this.config.CANVAS_HEIGHT - 150;
                const topY = baseY - (this.treeSettings.height * blockSize * 1.5);
                
                this.ctx.fillStyle = this.treeSettings.starColor;
                this.ctx.beginPath();
                
                const points = 5;
                const outerRadius = blockSize * 1.2;
                const innerRadius = blockSize * 0.6;
                
                for (let i = 0; i < points * 2; i++) {
                    const radius = i % 2 === 0 ? outerRadius : innerRadius;
                    const angle = (i * Math.PI) / points;
                    const x = centerX + Math.cos(angle) * radius;
                    const y = topY - 20 + Math.sin(angle) * radius;
                    
                    if (i === 0) this.ctx.moveTo(x, y);
                    else this.ctx.lineTo(x, y);
                }
                
                this.ctx.closePath();
                this.ctx.fill();
                
                if (this.treeSettings.glow) {
                    this.ctx.shadowColor = this.treeSettings.starColor;
                    this.ctx.shadowBlur = 20;
                    setTimeout(() => this.ctx.shadowBlur = 0, 50);
                }
                
                this.stats.lights++;
            }

            drawSnow() {
                const blockSize = this.config.BLOCK_SIZE;
                const centerX = this.config.CANVAS_WIDTH / 2;
                const baseY = this.config.CANVAS_HEIGHT - 150;
                
                // Snow on tree
                this.ctx.fillStyle = '#ffffff';
                for (let layer = 0; layer < this.treeSettings.height; layer++) {
                    const layerWidth = this.treeSettings.width - Math.floor(layer / 2);
                    const y = baseY - (layer * blockSize * 1.5);
                    
                    for (let i = 0; i < layerWidth; i++) {
                        if (Math.random() > 0.6) {
                            const x = centerX - ((layerWidth / 2) * blockSize) + (i * blockSize);
                            this.ctx.beginPath();
                            this.ctx.arc(x + blockSize/2, y + 2, 2, 0, Math.PI * 2);
                            this.ctx.fill();
                        }
                    }
                }
                
                // Snow on ground
                this.ctx.fillStyle = '#ffffff';
                this.ctx.fillRect(0, this.config.CANVAS_HEIGHT - 80, this.config.CANVAS_WIDTH, 80);
                
                // Snow texture
                this.ctx.fillStyle = '#f0f0f0';
                for (let i = 0; i < 30; i++) {
                    const x = Math.random() * this.config.CANVAS_WIDTH;
                    const y = this.config.CANVAS_HEIGHT - 80 + Math.random() * 30;
                    const size = Math.random() * 4 + 1;
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, size, 0, Math.PI * 2);
                    this.ctx.fill();
                }
            }

            drawGifts() {
                const blockSize = this.config.BLOCK_SIZE;
                const centerX = this.config.CANVAS_WIDTH / 2;
                const baseY = this.config.CANVAS_HEIGHT - 80;
                const giftColors = ['#ff0000', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ff8800'];
                const giftCount = Math.floor(Math.random() * 4) + 2;
                
                for (let i = 0; i < giftCount; i++) {
                    const offset = (giftCount - 1) * blockSize;
                    const x = centerX - offset/2 + (i * blockSize * 1.5);
                    const color = giftColors[i % giftColors.length];
                    const ribbonColor = giftColors[(i + 2) % giftColors.length];
                    
                    // Gift box
                    this.ctx.fillStyle = color;
                    this.ctx.fillRect(x, baseY - blockSize * 2, blockSize * 1.5, blockSize * 1.5);
                    
                    // Border
                    this.ctx.strokeStyle = '#000000';
                    this.ctx.lineWidth = 1;
                    this.ctx.strokeRect(x, baseY - blockSize * 2, blockSize * 1.5, blockSize * 1.5);
                    
                    // Ribbon
                    this.ctx.fillStyle = ribbonColor;
                    this.ctx.fillRect(x + blockSize * 0.75 - 3, baseY - blockSize * 2, 6, blockSize * 1.5);
                    this.ctx.fillRect(x, baseY - blockSize + 3, blockSize * 1.5, 6);
                    
                    // Bow
                    this.ctx.fillStyle = ribbonColor;
                    this.ctx.beginPath();
                    this.ctx.arc(x + blockSize * 0.75, baseY - blockSize * 2, 5, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    this.stats.gifts++;
                }
            }

            drawSparkles() {
                if (this.sparkles.length === 0) {
                    this.sparkles = Array.from({length: 20}, () => ({
                        x: Math.random() * this.config.CANVAS_WIDTH,
                        y: Math.random() * this.config.CANVAS_HEIGHT * 0.8,
                        size: Math.random() * 3 + 1,
                        speed: Math.random() * 0.5 + 0.2,
                        opacity: Math.random() * 0.5 + 0.5
                    }));
                }

                this.ctx.fillStyle = '#ffffff';
                this.sparkles.forEach(sparkle => {
                    sparkle.y -= sparkle.speed;
                    if (sparkle.y < 0) {
                        sparkle.y = this.config.CANVAS_HEIGHT * 0.8;
                        sparkle.x = Math.random() * this.config.CANVAS_WIDTH;
                    }
                    
                    this.ctx.globalAlpha = sparkle.opacity * (Math.sin(Date.now() / 1000) * 0.5 + 0.5);
                    this.ctx.beginPath();
                    this.ctx.arc(sparkle.x, sparkle.y, sparkle.size, 0, Math.PI * 2);
                    this.ctx.fill();
                });
                this.ctx.globalAlpha = 1;
            }

            // ============================================
            // USER ACTIONS
            // ============================================
            addToHistory() {
                const snapshot = JSON.parse(JSON.stringify(this.treeSettings));
                
                // Remove old future history if we're not at the end
                if (this.historyIndex < this.history.length - 1) {
                    this.history = this.history.slice(0, this.historyIndex + 1);
                }
                
                this.history.push(snapshot);
                this.historyIndex++;
                
                // Limit history size
                if (this.history.length > this.config.MAX_HISTORY) {
                    this.history.shift();
                    this.historyIndex--;
                }
                
                this.updateHistoryButtons();
            }

            undo() {
                if (this.historyIndex > 0) {
                    this.historyIndex--;
                    this.treeSettings = JSON.parse(JSON.stringify(this.history[this.historyIndex]));
                    this.updateControls();
                    this.generateTree();
                }
            }

            redo() {
                if (this.historyIndex < this.history.length - 1) {
                    this.historyIndex++;
                    this.treeSettings = JSON.parse(JSON.stringify(this.history[this.historyIndex]));
                    this.updateControls();
                    this.generateTree();
                }
            }

            generateRandomTree() {
                this.treeSettings.height = Math.floor(Math.random() * 11) + 5;
                this.treeSettings.width = Math.floor(Math.random() * 7) + 3;
                this.treeSettings.treeColor = this.getRandomColor();
                this.treeSettings.trunkColor = this.getRandomBrown();
                this.treeSettings.ornamentColor = this.getRandomColor();
                this.treeSettings.starColor = this.getRandomColor();
                this.treeSettings.snow = Math.random() > 0.3;
                this.treeSettings.lights = Math.random() > 0.2;
                this.treeSettings.animatedSnow = this.treeSettings.snow && Math.random() > 0.5;
                this.treeSettings.glow = Math.random() > 0.4;
                this.treeSettings.gifts = Math.random() > 0.3;
                this.treeSettings.sparkle = Math.random() > 0.5;
                
                this.updateControls();
                this.addToHistory();
                this.generateTree();
                this.showToast('ðŸŽ² Random tree generated!', 'success');
            }

            loadPreset(presetName) {
                if (this.presets[presetName]) {
                    this.treeSettings = JSON.parse(JSON.stringify(this.presets[presetName]));
                    this.currentPreset = presetName;
                    this.updateControls();
                    this.addToHistory();
                    this.generateTree();
                    this.showToast(`ðŸŽ¨ Loaded ${presetName} preset!`, 'success');
                }
            }

            async downloadTree() {
                this.showLoading(true);
                
                try {
                    const link = document.createElement('a');
                    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                    link.download = `minecraft-christmas-tree-${timestamp}.png`;
                    
                    // Create a high-quality version for download
                    const tempCanvas = document.createElement('canvas');
                    const tempCtx = tempCanvas.getContext('2d');
                    tempCanvas.width = this.config.CANVAS_WIDTH * 2;
                    tempCanvas.height = this.config.CANVAS_HEIGHT * 2;
                    
                    // Scale and redraw
                    tempCtx.scale(2, 2);
                    tempCtx.drawImage(this.canvas, 0, 0);
                    
                    await new Promise((resolve) => {
                        tempCanvas.toBlob((blob) => {
                            link.href = URL.createObjectURL(blob);
                            link.click();
                            URL.revokeObjectURL(link.href);
                            resolve();
                        }, 'image/png', 1.0);
                    });
                    
                    this.showToast('âœ… Tree downloaded successfully!', 'success');
                } catch (error) {
                    console.error('Download error:', error);
                    this.showToast('âŒ Download failed. Please try again.', 'error');
                } finally {
                    this.showLoading(false);
                }
            }

            async shareTree() {
                const shareData = {
                    title: `ðŸŽ„ My Minecraft Christmas Tree (${this.treeSettings.height}x${this.treeSettings.width})`,
                    text: `Check out my Minecraft Christmas Tree! ${this.stats.blocks} blocks, ${this.stats.ornaments} ornaments, ${this.stats.lights} lights, and ${this.stats.gifts} gifts!`,
                    url: document.getElementById('shareLink').textContent
                };
                
                if (navigator.share && navigator.canShare(shareData)) {
                    try {
                        await navigator.share(shareData);
                        this.showToast('âœ… Tree shared successfully!', 'success');
                    } catch (err) {
                        if (err.name !== 'AbortError') {
                            this.copyShareLink();
                        }
                    }
                } else {
                    this.copyShareLink();
                }
            }

            copyShareLink() {
                const link = document.getElementById('shareLink').textContent;
                
                navigator.clipboard.writeText(link).then(() => {
                    this.showToast('âœ… Share link copied to clipboard!', 'success');
                }).catch(err => {
                    // Fallback
                    const textArea = document.createElement('textarea');
                    textArea.value = link;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showToast('âœ… Share link copied to clipboard!', 'success');
                });
            }

            copyTreeCode() {
                const code = document.getElementById('treeCode').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    this.showToast('âœ… Tree code copied!', 'success');
                });
            }

            // ============================================
            // SOCIAL SHARING
            // ============================================
            shareOnTwitter() {
                const text = encodeURIComponent(`ðŸŽ„ Check out my Minecraft Christmas Tree! ${this.stats.blocks} blocks, ${this.stats.ornaments} ornaments! #MinecraftChristmas #MinecraftTreeMaker`);
                const url = encodeURIComponent(document.getElementById('shareLink').textContent);
                window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
            }

            shareOnFacebook() {
                const url = encodeURIComponent(document.getElementById('shareLink').textContent);
                window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
            }

            shareOnReddit() {
                const title = encodeURIComponent('My Minecraft Christmas Tree!');
                const url = encodeURIComponent(document.getElementById('shareLink').textContent);
                window.open(`https://reddit.com/submit?title=${title}&url=${url}`, '_blank');
            }

            shareOnWhatsApp() {
                const text = encodeURIComponent(`Check out my Minecraft Christmas Tree! ðŸŽ„âœ¨ ${document.getElementById('shareLink').textContent}`);
                window.open(`https://wa.me/?text=${text}`, '_blank');
            }

            shareOnDiscord() {
                this.copyTreeCode();
                this.showToast('âœ… Tree code copied! Paste in Discord.', 'success');
            }

            shareOnPinterest() {
                const url = encodeURIComponent(document.getElementById('shareLink').textContent);
                const description = encodeURIComponent(`Minecraft Christmas Tree with ${this.stats.blocks} blocks`);
                
                // Create temporary image for Pinterest
                const dataUrl = this.canvas.toDataURL('image/png');
                window.open(`https://pinterest.com/pin/create/button/?url=${url}&description=${description}&media=${encodeURIComponent(dataUrl)}`, '_blank');
            }

            // ============================================
            // UI UPDATES
            // ============================================
            updateControls() {
                document.getElementById('treeHeight').value = this.treeSettings.height;
                document.getElementById('treeWidth').value = this.treeSettings.width;
                document.getElementById('heightValue').textContent = this.treeSettings.height;
                document.getElementById('widthValue').textContent = this.treeSettings.width;
                
                document.getElementById('treeColor').value = this.treeSettings.treeColor;
                document.getElementById('trunkColor').value = this.treeSettings.trunkColor;
                document.getElementById('ornamentColor').value = this.treeSettings.ornamentColor;
                document.getElementById('starColor').value = this.treeSettings.starColor;
                
                document.getElementById('snowToggle').checked = this.treeSettings.snow;
                document.getElementById('lightsToggle').checked = this.treeSettings.lights;
                document.getElementById('animatedSnow').checked = this.treeSettings.animatedSnow;
                document.getElementById('glowEffect').checked = this.treeSettings.glow;
                document.getElementById('giftsToggle').checked = this.treeSettings.gifts;
                document.getElementById('sparkleEffect').checked = this.treeSettings.sparkle;
                
                // Update preset button
                document.querySelectorAll('.preset-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.preset === this.currentPreset);
                });
            }

            updateStatsDisplay() {
                document.getElementById('blockCount').textContent = this.stats.blocks;
                document.getElementById('ornamentCount').textContent = this.stats.ornaments;
                document.getElementById('lightCount').textContent = this.stats.lights;
                document.getElementById('giftCount').textContent = this.stats.gifts;
            }

            generateTreeCode() {
                const code = `// Minecraft Christmas Tree - Generated ${new Date().toLocaleString()}
// Tree ID: ${this.generateTreeId()}
// Blocks: ${this.stats.blocks} | Ornaments: ${this.stats.ornaments} | Lights: ${this.stats.lights} | Gifts: ${this.stats.gifts}

SETTINGS:
- Height: ${this.treeSettings.height} blocks
- Width: ${this.treeSettings.width} blocks
- Tree Color: ${this.treeSettings.treeColor}
- Trunk Color: ${this.treeSettings.trunkColor}
- Ornament Color: ${this.treeSettings.ornamentColor}
- Star Color: ${this.treeSettings.starColor}
- Snow: ${this.treeSettings.snow ? 'Enabled' : 'Disabled'}
- Lights: ${this.treeSettings.lights ? 'Enabled' : 'Disabled'}
- Glow: ${this.treeSettings.glow ? 'Enabled' : 'Disabled'}
- Gifts: ${this.treeSettings.gifts ? 'Enabled' : 'Disabled'}
- Sparkle: ${this.treeSettings.sparkle ? 'Enabled' : 'Disabled'}

SHARE THIS TREE:
${document.getElementById('shareLink').textContent}

BUILD INSTRUCTIONS:
1. Start with a ${this.treeSettings.height} block tall trunk
2. Build layers from bottom to top, decreasing width by 0.5 blocks per layer
3. Add ornaments at random positions
4. Place star on top
5. Add gifts around base
6. Add snow if enabled

#MinecraftChristmas #MinecraftTreeMaker #MinecraftBuild`;

                document.getElementById('treeCode').textContent = code;
            }

            updateShareLink() {
                try {
                    const settingsString = JSON.stringify(this.treeSettings);
                    const encodedSettings = btoa(settingsString).replace(/=/g, '');
                    const shareUrl = `https://${this.config.SITE_DOMAIN}/minecraft-christmas-tree-maker/?tree=${encodedSettings}`;
                    document.getElementById('shareLink').textContent = shareUrl;
                } catch (error) {
                    document.getElementById('shareLink').textContent = `https://${this.config.SITE_DOMAIN}/minecraft-christmas-tree-maker/`;
                }
            }

            updatePageTitle() {
                const blocksText = this.stats.blocks > 0 ? ` | ${this.stats.blocks} blocks` : '';
                document.title = `ðŸŽ„ Minecraft Tree (${this.treeSettings.height}x${this.treeSettings.width})${blocksText} - ${this.config.PAGE_TITLE}`;
            }

            updateHistoryButtons() {
                const undoBtn = document.getElementById('undoBtn');
                const redoBtn = document.getElementById('redoBtn');
                
                undoBtn.disabled = this.historyIndex <= 0;
                redoBtn.disabled = this.historyIndex >= this.history.length - 1;
            }

            updateEffects() {
                if (this.treeSettings.animatedSnow || this.treeSettings.sparkle) {
                    this.createSnowEffect();
                } else {
                    document.querySelectorAll('.snowflake').forEach(s => s.remove());
                }
            }

            createSnowEffect() {
                if (!this.treeSettings.animatedSnow) return;
                
                document.querySelectorAll('.snowflake').forEach(s => s.remove());
                
                for (let i = 0; i < 50; i++) {
                    const snowflake = document.createElement('div');
                    snowflake.className = 'snowflake';
                    snowflake.setAttribute('aria-hidden', 'true');
                    snowflake.textContent = Math.random() > 0.5 ? 'â„' : 'â…';
                    snowflake.style.left = Math.random() * 100 + '%';
                    snowflake.style.fontSize = (Math.random() * 25 + 15) + 'px';
                    snowflake.style.opacity = Math.random() * 0.7 + 0.3;
                    snowflake.style.animationDuration = (Math.random() * 15 + 10) + 's';
                    snowflake.style.animationDelay = Math.random() * 5 + 's';
                    
                    document.body.appendChild(snowflake);
                }
            }

            // ============================================
            // STORAGE & URL
            // ============================================
            saveToStorage() {
                try {
                    localStorage.setItem('minecraftTreeSettings', JSON.stringify(this.treeSettings));
                } catch (e) {
                    console.warn('Could not save to localStorage:', e);
                }
            }

            loadFromStorage() {
                try {
                    const saved = localStorage.getItem('minecraftTreeSettings');
                    if (saved) {
                        const loaded = JSON.parse(saved);
                        Object.assign(this.treeSettings, loaded);
                    }
                } catch (e) {
                    console.warn('Could not load from localStorage:', e);
                }

                // Load from URL parameters
                const urlParams = new URLSearchParams(window.location.search);
                const treeParam = urlParams.get('tree');
                
                if (treeParam) {
                    try {
                        const decodedSettings = atob(treeParam);
                        const loadedSettings = JSON.parse(decodedSettings);
                        Object.assign(this.treeSettings, loadedSettings);
                        this.showToast('ðŸŒ² Loaded shared tree!', 'success');
                    } catch (e) {
                        console.error('Error loading tree from URL:', e);
                    }
                }
            }

            // ============================================
            // UTILITIES
            // ============================================
            showLoading(show) {
                const loadingEl = document.getElementById('loading');
                const progressFill = document.getElementById('progressFill');
                
                if (show) {
                    loadingEl.style.display = 'flex';
                    let progress = 0;
                    const interval = setInterval(() => {
                        progress += 2;
                        progressFill.style.width = `${Math.min(progress, 90)}%`;
                        if (progress >= 90) clearInterval(interval);
                    }, 30);
                } else {
                    progressFill.style.width = '100%';
                    setTimeout(() => {
                        loadingEl.style.display = 'none';
                        progressFill.style.width = '0%';
                    }, 300);
                }
            }

            showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.setAttribute('role', 'alert');
                toast.setAttribute('aria-live', 'assertive');
                
                const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
                toast.innerHTML = `<span>${icon}</span><span>${message}</span>`;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 3000);
            }

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            getRandomColor() {
                const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ff8800', '#8800ff', '#ff4444', '#44ff44', '#4444ff'];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            getRandomBrown() {
                const browns = ['#8B4513', '#A0522D', '#CD853F', '#D2691E', '#8B7355'];
                return browns[Math.floor(Math.random() * browns.length)];
            }

            darkenColor(color, percent) {
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = Math.max(0, (num >> 16) - amt);
                const G = Math.max(0, (num >> 8 & 0x00FF) - amt);
                const B = Math.max(0, (num & 0x0000FF) - amt);
                return "#" + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
            }

            lightenColor(color, percent) {
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = Math.min(255, (num >> 16) + amt);
                const G = Math.min(255, (num >> 8 & 0x00FF) + amt);
                const B = Math.min(255, (num & 0x0000FF) + amt);
                return "#" + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
            }

            generateTreeId() {
                return Math.random().toString(36).substring(2, 10).toUpperCase();
            }
        }

        // ============================================
        // GLOBAL FUNCTIONS FOR HTML ATTRIBUTES
        // ============================================
        let treeMaker;

        // Global functions for onclick attributes
        function toggleFAQ(id) {
            const faq = document.getElementById(id);
            faq.classList.toggle('active');
        }

        function undo() {
            treeMaker.undo();
        }

        function redo() {
            treeMaker.redo();
        }

        function generateRandomTree() {
            treeMaker.generateRandomTree();
        }

        function downloadTree() {
            treeMaker.downloadTree();
        }

        function shareTree() {
            treeMaker.shareTree();
        }

        function copyShareLink() {
            treeMaker.copyShareLink();
        }

        function copyTreeCode() {
            treeMaker.copyTreeCode();
        }

        function loadPreset(preset) {
            treeMaker.loadPreset(preset);
        }

        function shareOnTwitter() {
            treeMaker.shareOnTwitter();
        }

        function shareOnFacebook() {
            treeMaker.shareOnFacebook();
        }

        function shareOnReddit() {
            treeMaker.shareOnReddit();
        }

        function shareOnWhatsApp() {
            treeMaker.shareOnWhatsApp();
        }

        function shareOnDiscord() {
            treeMaker.shareOnDiscord();
        }

        function shareOnPinterest() {
            treeMaker.shareOnPinterest();
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            treeMaker = new MinecraftTreeMaker();
            
            // Export for debugging
            window.treeMaker = treeMaker;
            
            console.log('ðŸŽ„ Minecraft Christmas Tree Maker loaded successfully!');
        });

        // ============================================
        // SERVICE WORKER FOR PWA
        // ============================================
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(console.error);
            });
        }

        // ============================================
        // OFFLINE SUPPORT
        // ============================================
        window.addEventListener('online', () => {
            treeMaker.showToast('ðŸŒ Back online! All features available.', 'success');
        });

        window.addEventListener('offline', () => {
            treeMaker.showToast('ðŸ“´ You are offline. Some features may be limited.', 'info');
        });
    </script>
</body>
</html>